!DOCTYPE html
html lang=ru
head
  meta charset=UTF-8 
  meta name=viewport content=width=device-width, initial-scale=1.0
  title–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Çtitle
  link rel=stylesheet href=styles.css 
head
body
  div class=container
    a href=index.html class=back‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—éa
    h2üìà –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Çh2
    div id=profile-info
      pstrong–ù–∏–∫strong span id=username–ó–∞–≥—Ä—É–∑–∫–∞...spanp
      pstrong–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–πstrong span id=completed‚Äîspanp
      pstrong–†–µ–π—Ç–∏–Ω–≥strong span id=rating‚Äîspanp
      h3–û—Ç–∑—ã–≤—ãh3
      ul id=reviewsul
    div
  div

  script src=httpstelegram.orgjstelegram-web-app.jsscript
  script
    const tg = window.Telegram.WebApp;
    tg.ready();

    const userId = tg.initDataUnsafe.user.id  ‚Äî;
    document.getElementById(username).textContent = tg.initDataUnsafe.user.username  ‚Äî;

    fetch(`httpsapi.airtable.comv0appTpq4tdeQ27uxQ9TasksfilterByFormula=%7BID%20–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è%7D='${userId}'`, {
      headers {
        Authorization Bearer patZ7hX8W8F8apmJm.9adf2ed71f8925dd372af08a5b5af2af4b12ead4abc0036be4ea68c43c47a8c4
      }
    })
    .then(res = res.json())
    .then(data = {
      const tasks = data.records.filter(task = task.fields[–°—Ç–∞—Ç—É—Å] === –ó–∞–≤–µ—Ä—à–µ–Ω–∞);
      document.getElementById(completed).textContent = tasks.length;

      let reviews = [];
      tasks.forEach(task = {
        if (task.fields[–û—Ç–∑—ã–≤]) {
          reviews.push(task.fields[–û—Ç–∑—ã–≤]);
        }
      });

      const list = document.getElementById(reviews);
      if (reviews.length === 0) {
        list.innerHTML = li–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.li;
      } else {
        list.innerHTML = reviews.map(r = `liüí¨ ${r}li`).join();
      }

       –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–π—Ç–∏–Ω–≥ ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–ª–∏–Ω–∞ –æ—Ç–∑—ã–≤–æ–≤
      document.getElementById(rating).textContent = reviews.length  (5).toFixed(1)  ‚Äî;
    })
    .catch(err = {
      console.error(–û—à–∏–±–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è, err);
      document.getElementById(completed).textContent = –û—à–∏–±–∫–∞;
      document.getElementById(rating).textContent = –û—à–∏–±–∫–∞;
    });
  script
body
html
